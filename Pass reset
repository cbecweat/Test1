// Retrieve the salt for the user from the database
    $query = "SELECT * FROM `tokens` WHERE username = '$username' AND email = '$email' AND token = '$token'";
    $result = mysqli_query($con, $query);
    $user = mysqli_fetch_assoc($result);

    if ($user) {
        // Generate a random salt
        $salt = bin2hex(random_bytes(16)); // 16 bytes (128 bits) salt

        // Combine salt with the password
        $password_with_salt = $password . $salt;

        // Hash the password with salt
        $hashed_password = hash('sha256', $password_with_salt);

        $query = "UPDATE users SET password = '$hashed_password' WHERE username = '$username' AND email = '$email'";
        $result = mysqli_query($con, $query);

        if ($result) {
            echo "<h3>Password has been reset successfully.</h3>";
        } else {
            echo "<h3>Failed to reset password. Please try again.</h3>";
        }
    } else {
        echo "<h3>Invalid username, email, or token.</h3>";
    }
}
?>
